<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
    <title>
      Hueue Console
    </title>
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  </head>
  <h1>Hueue dashboard :o</h1>
  <br><br>

  Jobs:
  <br>
  <div id="jobs">
  </div>
  <br><br>

  <div id="oauthLogin">
  </div>
  <br><br>

  <a href="">Dequeue all jobs :o</a>
  <br><br>

  <a href="">Go to the login page</a>
</html>

<script type="text/javascript">
    $.getJSON('get_jobs', function (jobs) {
        var content = "<table>"
        content += '<tr>'
          + '<td><bold>srcBranch</bold></td>'
          + '<td><bold>dstBranch</bold></td>'
          + '<td><bold>repoID</bold></td>'
        '</tr>';
        for (i = 0; i < jobs.length; i++){
            content += '<tr>'
              + '<td>' + jobs[i].srcBranch + '</td>'
              + '<td>' + jobs[i].dstBranch + '</td>'
              + '<td>' + jobs[i].repoID + '</td>'
            '</tr>';
        }
        content += "</table>"
        $('#jobs').append(content);
    });

    getOauthURL = function() {
      var url = "http://34.208.168.142:3000";
      var githubClientID = "416fdf5ed5fb66f16bd3";
      var oauthURL = "https://github.com/login/oauth/authorize"
                      + "?client_id="    + githubClientID
                      + "&redirect_uri=" + url + "/oauthRedirect"
                      + "&scope="        + "repo"
                      + "&state="        + "142857"
                      + "&allow_signup=" + "true";
      return oauthURL;
    }

    $('#oauthLogin').append("<a href=" + getOauthURL() + ">Give Hueue access</a>");
</script>